<!DOCTYPE html><html><head><meta charset="utf-8">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162141832-1"></script>
<script>
window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'UA-162141832-1')
</script>
<title>COVID-19 Japan 都道府県別 感染者予測と結果</title>
<style>
body {
	font-family: sans-serif;
	text-align: center;
}
h1 {
	font-size: 4vw;
	text-align: center;
}
h2 {
	font-size: 2.5vw;
}
.src {
	font-size: 85%;
}
</style>
</head>
<body>

<h1>COVID-19 Japan 都道府県別 感染者予測と結果</h1>

<select id=selpref></select>
<select id=seldate></select>

<script type="module" src="forecast-graph.mjs"></script>

<script type="module">
import { PREF, PREF_EN } from "./japan.js";
import { CSV } from "https://code4sabae.github.io/js/CSV.js";

window.onload = async () => {
	const appendOptions = (sel, ar) => {
		for (const d of ar) {
			const opt = document.createElement("option");
			opt.textContent = d;
			sel.appendChild(opt);
		}
	};

	const dates = await CSV.fetch("data/covid19forecast/google/list.csv");
	dates.shift();
	appendOptions(seldate, dates);
	console.log(dates);

	appendOptions(selpref, PREF);
	seldate.onchange = selpref.onchange = () => {
		const pref = PREF_EN[PREF.indexOf(selpref.value)];
		main.innerHTML = `<forecast-graph view-src=true view-pref="${pref}" date="${seldate.value}"></forecast-graph>`;
	};
	if (document.location.hash.length > 1) {
		selpref.value = PREF[PREF_EN.indexOf(document.location.hash.substring(1))];
	}
	selpref.onchange();
};
</script>

<div id="main">
<!--<forecast-graph view-src=true view-pref="Fukui" date="2020-11-15"></forecast-graph>-->
</div>

<div class=src>App: <a href="https://fukuno.jig.jp/3050">「福井発、サイバーバレー始動！オープンデータで経済産業大臣賞受賞」 一日一創 by 福野泰介</a>
</div>

<div style="margin:1em;text-align:center;">
	<a href="https://www.stopcovid19.jp/">
	<img src=img/stopcovid19_banner.png style="width:70vw"><br>
	「COVID-19 JAPAN 新型コロナウイルス対策ダッシュボード」<br>
	</a>
</div>

</body>
</html>
